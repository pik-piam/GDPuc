<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Handling missing conversion factors • GDPuc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Handling missing conversion factors">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GDPuc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.4.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/handle_NAs.html">Handling missing conversion factors</a></li>
    <li><a class="dropdown-item" href="../articles/magpie.html">Converting magpie objects</a></li>
    <li><a class="dropdown-item" href="../articles/source.html">Choosing conversion factors</a></li>
    <li><a class="dropdown-item" href="../articles/verbose.html">Getting information on the conversion process</a></li>
    <li><a class="dropdown-item" href="../articles/warn.html">Silence warnings</a></li>
    <li><a class="dropdown-item" href="../articles/with_regions.html">Converting regional GDP data</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pik-piam/GDPuc/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Handling missing conversion factors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pik-piam/GDPuc/blob/main/vignettes/handle_NAs.Rmd" class="external-link"><code>vignettes/handle_NAs.Rmd</code></a></small>
      <div class="d-none name"><code>handle_NAs.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="the-replace_nas-argument">The <code>replace_NAs</code> argument<a class="anchor" aria-label="anchor" href="#the-replace_nas-argument"></a>
</h2>
<p>Use the <code>replace_NAs</code> argument in <code>convertGDP</code>
to handle missing conversion factors.</p>
<div class="section level3">
<h3 id="replace_nas-null-or-na">
<code>replace_NAs</code> = NULL or NA<a class="anchor" aria-label="anchor" href="#replace_nas-null-or-na"></a>
</h3>
<p>By default, <code>replace_NAs</code> is <code>NULL</code>, and NAs
are returned along with a warning. Set <code>replace_NAs = NA</code> to
explicitly return NAs without the warning.</p>
<p>Below, the <code>return_cfs</code> argument is set to
<code>TRUE</code> to inspect the conversion factors, along side the
result.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/pik-piam/GDPuc" class="external-link">GDPuc</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test with Venezuela -&gt; iso3c = VEN</span></span>
<span><span class="va">my_gdp</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VEN"</span><span class="op">)</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2010</span><span class="op">:</span><span class="fl">2014</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">100</span><span class="op">:</span><span class="fl">104</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convertGDP.html">convertGDP</a></span><span class="op">(</span></span>
<span>  gdp <span class="op">=</span> <span class="va">my_gdp</span>,</span>
<span>  unit_in <span class="op">=</span> <span class="st">"constant 2005 Int$PPP"</span>,</span>
<span>  unit_out <span class="op">=</span> <span class="st">"constant 2019 Int$PPP"</span>,</span>
<span>  return_cfs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: NAs have been generated for countries lacking conversion factors!</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   iso3c  year value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN    <span style="text-decoration: underline;">2</span>010    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> VEN    <span style="text-decoration: underline;">2</span>011    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> VEN    <span style="text-decoration: underline;">2</span>012    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> VEN    <span style="text-decoration: underline;">2</span>013    <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> VEN    <span style="text-decoration: underline;">2</span>014    <span style="color: #BB0000;">NA</span></span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">cfs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   iso3c \033[34m2005 PPP convers…¹ \033[34m2019 value o…² \033[34m2019 PPP con…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN                        0.842                     <span style="color: #BB0000;">NA</span>                     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names:</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`\033[34m2005 PPP conversion factor\033[39m in (LCU per international $)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`\033[34m2019 value of base 2005 GDP deflator\033[39m in (constant 2019 LCU per constant 2005 LCU)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​`\033[34m2019 PPP conversion factor\033[39m in (LCU per international $)`</span></span></span></code></pre></div>
<p>To eliminate the warning:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convertGDP.html">convertGDP</a></span><span class="op">(</span></span>
<span>  gdp <span class="op">=</span> <span class="va">my_gdp</span>, </span>
<span>  unit_in <span class="op">=</span> <span class="st">"constant 2005 Int$PPP"</span>, </span>
<span>  unit_out <span class="op">=</span> <span class="st">"constant 2019 Int$PPP"</span>,</span>
<span>  replace_NAs <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>You can also use the <code>GDPuc.warn</code> option to suppress
warnings from <code>convertGDP</code> in general (see <a href="https://pik-piam.github.io/GDPuc/articles/warn.html">“Silence
warnings”</a>).</p>
</div>
<div class="section level3">
<h3 id="replace_nas-0">
<code>replace_NAs</code> = 0<a class="anchor" aria-label="anchor" href="#replace_nas-0"></a>
</h3>
<p>If set to 0, resulting NAs are set to 0.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_gdp</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="st">"VEN"</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2010</span><span class="op">:</span><span class="fl">2014</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">100</span><span class="op">:</span><span class="fl">104</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convertGDP.html">convertGDP</a></span><span class="op">(</span></span>
<span>  gdp <span class="op">=</span> <span class="va">my_gdp</span>,</span>
<span>  unit_in <span class="op">=</span> <span class="st">"constant 2005 Int$PPP"</span>,</span>
<span>  unit_out <span class="op">=</span> <span class="st">"constant 2019 Int$PPP"</span>,</span>
<span>  replace_NAs <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  return_cfs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   iso3c  year value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN    <span style="text-decoration: underline;">2</span>010     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> VEN    <span style="text-decoration: underline;">2</span>011     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> VEN    <span style="text-decoration: underline;">2</span>012     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> VEN    <span style="text-decoration: underline;">2</span>013     0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> VEN    <span style="text-decoration: underline;">2</span>014     0</span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">cfs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   iso3c \033[34m2005 PPP convers…¹ \033[34m2019 value o…² \033[34m2019 PPP con…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN                        0.842                     <span style="color: #BB0000;">NA</span>                     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names:</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`\033[34m2005 PPP conversion factor\033[39m in (LCU per international $)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`\033[34m2019 value of base 2005 GDP deflator\033[39m in (constant 2019 LCU per constant 2005 LCU)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​`\033[34m2019 PPP conversion factor\033[39m in (LCU per international $)`</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="replace_nas-no_conversion">
<code>replace_NAs</code> = “no_conversion”<a class="anchor" aria-label="anchor" href="#replace_nas-no_conversion"></a>
</h3>
<p>If set to “no_conversion”, NAs are replaced with the values in the
gdp argument.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_gdp</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="st">"VEN"</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2010</span><span class="op">:</span><span class="fl">2014</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">100</span><span class="op">:</span><span class="fl">104</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convertGDP.html">convertGDP</a></span><span class="op">(</span></span>
<span>  gdp <span class="op">=</span> <span class="va">my_gdp</span>,</span>
<span>  unit_in <span class="op">=</span> <span class="st">"constant 2005 Int$PPP"</span>,</span>
<span>  unit_out <span class="op">=</span> <span class="st">"constant 2019 Int$PPP"</span>,</span>
<span>  replace_NAs <span class="op">=</span> <span class="st">"no_conversion"</span>,</span>
<span>  return_cfs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   iso3c  year value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN    <span style="text-decoration: underline;">2</span>010   100</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> VEN    <span style="text-decoration: underline;">2</span>011   101</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> VEN    <span style="text-decoration: underline;">2</span>012   102</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> VEN    <span style="text-decoration: underline;">2</span>013   103</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> VEN    <span style="text-decoration: underline;">2</span>014   104</span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">cfs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   iso3c \033[34m2005 PPP convers…¹ \033[34m2019 value o…² \033[34m2019 PPP con…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN                        0.842                     <span style="color: #BB0000;">NA</span>                     <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names:</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`\033[34m2005 PPP conversion factor\033[39m in (LCU per international $)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`\033[34m2019 value of base 2005 GDP deflator\033[39m in (constant 2019 LCU per constant 2005 LCU)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​`\033[34m2019 PPP conversion factor\033[39m in (LCU per international $)`</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="replace_nas-linear">
<code>replace_NAs</code> = “linear”<a class="anchor" aria-label="anchor" href="#replace_nas-linear"></a>
</h3>
<p>If set to “linear”, missing conversion factors are inter- and
extrapolated linearly. For the extrapolation, the closest 5 data points
are used.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_gdp</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="st">"VEN"</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2010</span><span class="op">:</span><span class="fl">2014</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">100</span><span class="op">:</span><span class="fl">104</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convertGDP.html">convertGDP</a></span><span class="op">(</span></span>
<span>  gdp <span class="op">=</span> <span class="va">my_gdp</span>,</span>
<span>  unit_in <span class="op">=</span> <span class="st">"constant 2005 Int$PPP"</span>,</span>
<span>  unit_out <span class="op">=</span> <span class="st">"constant 2019 Int$PPP"</span>,</span>
<span>  replace_NAs <span class="op">=</span> <span class="st">"linear"</span>,</span>
<span>  return_cfs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   iso3c  year value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN    <span style="text-decoration: underline;">2</span>010  203.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> VEN    <span style="text-decoration: underline;">2</span>011  205.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> VEN    <span style="text-decoration: underline;">2</span>012  208.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> VEN    <span style="text-decoration: underline;">2</span>013  210.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> VEN    <span style="text-decoration: underline;">2</span>014  212.</span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">cfs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">#&gt;   iso3c \033[34m2005 PPP convers…¹ \033[34m2019 value o…² \033[34m2019 PPP con…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN                        0.842                   14.4                   5.97</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names:</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`\033[34m2005 PPP conversion factor\033[39m in (LCU per international $)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`\033[34m2019 value of base 2005 GDP deflator\033[39m in (constant 2019 LCU per constant 2005 LCU)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​`\033[34m2019 PPP conversion factor\033[39m in (LCU per international $)`</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="replace_nas-regional_average">
<code>replace_NAs</code> = “regional_average”<a class="anchor" aria-label="anchor" href="#replace_nas-regional_average"></a>
</h3>
<p>If set to “regional_average”, the regional GDP-weighted averages will
be used. Requires a region-mapping, and a column in the source object
with GDP data at PPP, to be used as weight. <strong>May lead to
misleading results, use with care!</strong></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_gdp</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="st">"VEN"</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2010</span><span class="op">:</span><span class="fl">2014</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">100</span><span class="op">:</span><span class="fl">104</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_mapping_data_frame</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VEN"</span>, <span class="st">"BRA"</span>, <span class="st">"ARG"</span>, <span class="st">"COL"</span><span class="op">)</span>,</span>
<span>  region <span class="op">=</span> <span class="st">"LAM"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convertGDP.html">convertGDP</a></span><span class="op">(</span></span>
<span>  gdp <span class="op">=</span> <span class="va">my_gdp</span>,</span>
<span>  unit_in <span class="op">=</span> <span class="st">"constant 2005 Int$PPP"</span>,</span>
<span>  unit_out <span class="op">=</span> <span class="st">"constant 2019 Int$PPP"</span>,</span>
<span>  replace_NAs <span class="op">=</span> <span class="st">"regional_average"</span>,</span>
<span>  with_regions <span class="op">=</span> <span class="va">my_mapping_data_frame</span>,</span>
<span>  return_cfs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   iso3c  year value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN    <span style="text-decoration: underline;">2</span>010 0.485</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> VEN    <span style="text-decoration: underline;">2</span>011 0.489</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> VEN    <span style="text-decoration: underline;">2</span>012 0.494</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> VEN    <span style="text-decoration: underline;">2</span>013 0.499</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> VEN    <span style="text-decoration: underline;">2</span>014 0.504</span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">cfs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 3</span></span></span>
<span><span class="co">#&gt;   iso3c \033[34m2019 value of base 2005 GDP deflator\03…¹ \033[34m2019 PPP con…²</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN                                                1.18                   205.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names:</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`\033[34m2019 value of base 2005 GDP deflator\033[39m in (constant 2019 LCU per constant 2005 LCU)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`\033[34m2019 PPP conversion factor\033[39m in (LCU per international $)`</span></span></span>
<span></span>
<span><span class="co"># Compare the 2019 PPP with the 2005 PPP. They are not in the same order of magnitude. </span></span>
<span><span class="co"># Obviously, being a part of the same region, does not mean the currencies are of the same strength.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="replace_nas-clinear">
<code>replace_NAs</code> = c(“linear”, “…”)<a class="anchor" aria-label="anchor" href="#replace_nas-clinear"></a>
</h3>
<p>If a vector is passed, with “linear” as first element, then the
operations are done in sequence. For example for c(“linear”, 0), missing
conversion factors are first inter- and extrapolated linearly but if any
missing conversion factors still lead to NAs, these are replaced with
0.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create an imaginary country XXX, and add it to the Latin America region</span></span>
<span><span class="va">my_gdp</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VEN"</span>, <span class="st">"XXX"</span><span class="op">)</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2010</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_mapping_data_frame</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VEN"</span>, <span class="st">"BRA"</span>, <span class="st">"ARG"</span>, <span class="st">"COL"</span>, <span class="st">"XXX"</span><span class="op">)</span>,</span>
<span>  region <span class="op">=</span> <span class="st">"LAM"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convertGDP.html">convertGDP</a></span><span class="op">(</span></span>
<span>  gdp <span class="op">=</span> <span class="va">my_gdp</span>,</span>
<span>  unit_in <span class="op">=</span> <span class="st">"constant 2005 Int$PPP"</span>,</span>
<span>  unit_out <span class="op">=</span> <span class="st">"constant 2019 Int$PPP"</span>,</span>
<span>  replace_NAs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"linear"</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  with_regions <span class="op">=</span> <span class="va">my_mapping_data_frame</span>,</span>
<span>  return_cfs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   iso3c  year value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN    <span style="text-decoration: underline;">2</span>010  203.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> XXX    <span style="text-decoration: underline;">2</span>010    0</span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">cfs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 3</span></span></span>
<span><span class="co">#&gt;   iso3c \033[34m2019 value of base 2005 GDP deflator\03…¹ \033[34m2019 PPP con…²</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN                                                14.4                   5.97</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> XXX                                                <span style="color: #BB0000;">NA</span>                    <span style="color: #BB0000;">NA</span>   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names:</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`\033[34m2019 value of base 2005 GDP deflator\033[39ms in (constant 2019 LCU per constant 2005 LCU)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`\033[34m2019 PPP conversion factor\033[39ms in (LCU per international $)`</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="replace_nas-with_usa">
<code>replace_NAs</code> = “with_USA”<a class="anchor" aria-label="anchor" href="#replace_nas-with_usa"></a>
</h3>
<p>If set to “with_USA”, missing conversion factors are extended using
the growth rates of the USA. If that is not possible (for instance if
there is no data for any years at all) the data for these countries is
converted using the conversion factors of the USA.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Venezuela is only missing conversion factors in 2019, AIA has no conversion factors at all.</span></span>
<span><span class="va">my_gdp</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  iso3c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VEN"</span>, <span class="st">"AIA"</span>, <span class="st">"USA"</span><span class="op">)</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convertGDP.html">convertGDP</a></span><span class="op">(</span></span>
<span>  gdp <span class="op">=</span> <span class="va">my_gdp</span>,</span>
<span>  unit_in <span class="op">=</span> <span class="st">"constant 2005 Int$PPP"</span>,</span>
<span>  unit_out <span class="op">=</span> <span class="st">"constant 2019 Int$PPP"</span>,</span>
<span>  replace_NAs <span class="op">=</span> <span class="st">"with_USA"</span>,</span>
<span>  return_cfs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">result</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 2</span></span></span>
<span><span class="co">#&gt;   iso3c value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> VEN    264.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> AIA    128.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> USA    128.</span></span>
<span></span>
<span><span class="va">x</span><span class="op">$</span><span class="va">cfs</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 4</span></span></span>
<span><span class="co">#&gt;   iso3c \033[34m2005 PPP convers…¹ \033[34m2019 value o…² \033[34m2019 PPP con…³</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> USA                        1                       1.28                   1   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> VEN                        0.842                   8.40                   2.68</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> AIA                        1                       1.28                   1   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names:</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`\033[34m2005 PPP conversion factor\033[39ms in (LCU per international $)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`\033[34m2019 value of base 2005 GDP deflator\033[39ms in (constant 2019 LCU per constant 2005 LCU)`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​`\033[34m2019 PPP conversion factor\033[39ms in (LCU per international $)`</span></span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Johannes Koch.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
